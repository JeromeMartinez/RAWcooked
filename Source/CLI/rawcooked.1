.TH "RAWcooked" "1" "https://mediaarea.net/RAWcooked" "18.10.1" "Bit-by-bit fidelity"
.\" Turn off justification for nroff.
.if n .ad l
.\" Turn off hyphenation.
.nh
.SH NAME
\fBRAWcooked\fR - encode and decode audio-visual RAW data with Matroska, FFV1 and FLAC
.SH SYNOPSIS
\fBrawcooked \fR[\fIoption\fR ...] (\fIfolder\fR | \fIfile\fR ...) [\fIoption\fR ...]
.SH DESCRIPTION
.TP
\fBRAWcooked\fR easily encodes RAW audio-visual sequences into the Matroska container (MKV), using the video codec FFV1 for the image and the audio codec FLAC for the sound. The metadata accompanying the RAW data are preserved, and sidecar files, like MD5, LUT or XML, can be added into the Matroska container as attachments. This allows for the management of these audio-visual file formats in an effective and transparent way (e.g. native playback in VLC), while saving typically between one to two thirds of the needed storage, and speeding up file writing and reading (e.g. to/from harddisk, over network or for backup on LTO).
.TP
When needed, the uncompressed source is retrieved \fBbit-by-bit\fR, in a manner faster than uncompressed sources. 
.TP
.I folder
Encodes with the FFV1 video codec all single-image video files in the \fIfolder\fR, encodes with the FLAC audio codec all audio files in the \fIfolder\fR, and muxes these into a Matroska container (.mkv).
.br
The filenames of the single image files must end with a numbered sequence. \fBRAWcooked\fR will generate the regex to parse in the correct order all the frames in the folder.
.TP
.I file
.B contains RAW data (e.g. a .dpx or .wav file):
.br
Encodes with the FFV1 video codec all single-image video files in the folder containing the \fIfile\fR, encodes with the FLAC audio codec all audio files in the folder containing the \fIfile\fR, and muxes these into a Matroska container (.mkv).
.br
The filenames usually end with a numbered sequence. Enter one frame and the tool will generate the regex to parse all the frames in the folder.
.TP
.I file
.B is a Matroska container (.mkv):
.br
Decodes back the video and the audio of \fIfile\fR to its original formats. All metadata accompanying the original data are preserved bit-by-bit.
.SH OPTIONS
.SS GENERAL OPTIONS
.TP
.B --help \fR|\fB -h
Displays a help message.
.TP
.B --version
Displays the installed version.
.TP
.B --attachment-max-size \fIvalue\fR | \fB-s \fIvalue
Set maximum size of attachments to \fIvalue\fR (in bytes).
.br
The default value is \fI1048576\fR.
.TP
.B --check \fIvalue\fR
Do or don't do costly (in terms of analysis duration or bytes read) checks.
.br
\fIpartial\fR (or \fI0\fR) is quicker but may lead to partial reversibility with files that do not conform.
.br
\fIfull\fR (or \fI1\fR) is slower but  guaranties reversability with e.g. DPX files with non zero padding bits.
.br
The default value is 'partial'.
.TP
.B --display-command \fR|\fB -d
When an external encoder/decoder is used, display the command to launch instead of just launching it.
.TP
.B --output-name \fIvalue\fR | \fB-o \fIvalue
Set the name of the output file or folder to \fIvalue\fR.
.br
Default value is \fI${Input}.mkv\fR (if input is a folder) or \fI${Input}.RAWcooked\fR (if input is a file).
.TP
.B --rawcooked-file-name \fIvalue\fR | \fB-r \fIvalue
Set during encoding, or retrieve by decoding, the name of the \fBRAWcooked\fR reversibility data file to \fIvalue\fR.
.br
The default name is \fI${Input}.rawcooked_reversibility_data\fR
.br
\fBNote:\fR If the \fBRAWcooked\fR reversibility data file is included in the output A/V file during the encoding, this file is deleted after encoding.
.br
\fBNote:\fR Not yet implemented for decoding.
.TP
.B --quiet
Do not show information related to RAWcooked.
.br
External encoder or decoder may need an additional option.
.TP
.B -y
Automatic yes to prompts.
.br
Assume \fIyes\fR in answer to all prompts, and run non-interactively.
.TP
.B -n
Automatic no to prompts.
.br
Assume \fIno\fR as answer to all prompts, and run non-interactively.
.SS ACTIONS
.TP
.B --all
Same as --check --check-padding --coherency --conch --encode --hash (see below)
.TP
.B --none
Same as --no-check --no-check-padding --no coherency --no-conch --no-encode (see below)
.TP
.B --check
Check that the encoded file can be correctly decoded.
.br
If input is raw content, encode then decode input and check that output is same as the input content.
.br
If the input is a Matroska container, decode the input and check that the output is same as the decoded content.
.TP
.B --no-check
Don't run any checks (see above).
.br
This is the default, but may change in the future.
.TP
.B --check-padding
Run padding checks. Be aware check function can be demanding of time and processor usage.
.br
It is slower but guaranties reversibility with e.g. DPX files with non zero padding bits.
.TP
.B --no-check-padding
Do not run padding checks, as they are demanding of time and processor usage.
.br
This method is quicker, but be aware it may lead to partial reversibility with files that do no conform.
.br
This is default, but may change in the future.
.TP
.B --coherency
Checks that the package and contents are coherent.
.br
This is currently partially implemented.
.br
This is default, but may change in the future.
.TP
.B --no-coherency
Do not carry out coherency check (see above).
.TP
.B --conch
Conformance check of the format, effective only when format is supported.
.br
This is currently partially implemented for DPX.
.TP
.B --no-conch
Do not carry out conformance check (see above).
.br
This is default, but may change in the future.
.TP
.B --encode
Encode audio-visual RAW data into a compressed stream.
.br
This is default.
.TP
.B --no-encode
Do not carry out encode (see above).
.TP
.B --hash
Can be used to either compute, or test, the hash of files.
.br
If input is raw content, do the hash and store hashes in RAWcooked metadata.
.br
If an hash file is in the raw content, test that the hash file is valid.
.br
If input is a Matroska container and RAWcooked metadata contains hashes, decode input and check hashes (issue considered as decoding error).
.br
If input is a Matroska container and with hash files in attachment, decode input and check hashes (issue considered as invalid data).
.br
Is default if input is a Matroska container and RAWcooked metadata contains hashes or if input is a Matroska container and with hash files in attachment (it may change in the future).
.TP
.B --no-hash
Do not compute or test the hash of the file (see above).
.br
This is default when the input is RAW content, but may change in the future.
.SS INPUT RELATED OPTIONS
.TP
.B --file
Unlock the compression of files, for example with .dpx or .wav.
.TP
.B -framerate \fIvalue
Force the video frame rate value to \fIvalue\fR.
.br
Default frame rate value is found in the image file metadata, if available. Otherwise it will default to \fI24\fR.
.SS ENCODING RELATED OPTIONS
.TP
.B -c:a \fIvalue
Force the audio encoding format to \fIvalue\fR: \fIcopy\fR (copy PCM to PCM, without modification), \fIflac\fR.
.br
The default value is \fIFLAC\fR.
.TP
.B -c:v \fIvalue
Force the video encoding format \fIvalue\fR: only \fIFFV1\fR is currently allowed.
.br
The default value is \fIFFV1\fR.
.TP
.B -coder \fIvalue
If video encoding format is \fIffv1\fR, set the coder to \fIvalue\fR: \fI0\fR (Golomb-Rice), \fI1\fR (Range Coder), \fI2\fR (Range Coder with custom state transition table).
.br
The default value is \fI1\fR.
.TP
.B -context \fIvalue
If video encoding format is \fIffv1\fR, set the context to \fIvalue\fR: \fI0\fR (small), \fI1\fR (large).
.br
The default value is \fI0\fR.
.TP
.B -format \fIvalue
Set the container format to \fIvalue\fR: only \fImatroska\fR is currently allowed.
.br
The default value is \fImatroska\fR.
.TP
.B -g \fIvalue
If video encoding format is \fIffv1\fR, set the GOP size to \fIvalue\fR\: any integer >=1.
.br
The default value is \fI1\fR. Ensure you leave the setting at \fI1\fR for archival use.
.TP
.B -level \fIvalue
If video encoding format is \fIffv1\fR, set the version to \fIvalue\fR: \fI0\fR, \fI1\fR, \fI3\fR.
.br
Default value is \fI3\fR.
.TP
.B -slicecrc \fIvalue
If video encoding format is \fIffv1\fR, set the CRC to \fIvalue\fR: \fI0\fR (CRC not present), \fI1\fR (CRC present).
.br
The default value is \fI1\fR.
.TP
.B -slices \fIvalue
If video encoding format is \fIffv1\fR, set the count of slices to \fIvalue\fR: any integer >=1 and making sense (2, 4, 6, 9, 16, 24...).
.br
The default value is variable between \fI16\fR and \fI512\fR, depending on the video frame size and depth.
.SH COPYRIGHT
Copyright (c) 2018-2019 MediaArea.net SARL & AV Preservation by reto.ch
.SH LICENSE
\fBRAWcooked\fR is released under a BSD License.
.SH DISCLAIMER
\fBRAWcooked\fR is provided "as is" without warranty or support of any kind.
